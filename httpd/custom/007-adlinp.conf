<VirtualHost *:80>
	ServerName gestion.local
RewriteEngine On
   RewriteCond %{HTTPS} off
   RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</VirtualHost>

<VirtualHost *:443>
	ServerName gestion.local

	    ErrorLog "/Users/julienmiclo/WebServer/logs/httpd/gestion.local/error.443.log"
        CustomLog "/Users/julienmiclo/WebServer/logs/httpd/gestion.local/access.443.log" common

	SSLEngine on
    	SSLProtocol All -SSLv2 -SSLv2 -TLSv1 -TLSv1.1
    	SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
    	SSLCompression off
    	SSLCertificateFile "/Users/julienmiclo/.certificats/gestion.local/cert.pem"
    	SSLCertificateKeyFile "/Users/julienmiclo/.certificats/gestion.local/key.pem"

	SSLProxyEngine on
	SSLProxyVerify none
	SSLProxyCheckPeerCN off
	SSLProxyCheckPeerName off
	SSLProxyCheckPeerExpire off
	ProxyPreserveHost on
	ProxyPass / https://localhost:8000/
	ProxyPassReverse / https://localhost:8000/
</VirtualHost>

<VirtualHost *:80>
	ServerName inscriptions.local
RewriteEngine On
   RewriteCond %{HTTPS} off
   RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</VirtualHost>

<VirtualHost *:443>
	ServerName inscriptions.local

	    ErrorLog "/Users/julienmiclo/WebServer/logs/httpd/inscriptions.local/error.443.log"
        CustomLog "/Users/julienmiclo/WebServer/logs/httpd/inscriptions.local/access.443.log" common

	SSLEngine on
    	SSLProtocol All -SSLv2 -SSLv2 -TLSv1 -TLSv1.1
    	SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
    	SSLCompression off
    	SSLCertificateFile "/Users/julienmiclo/.certificats/inscriptions.local/cert.pem"
    	SSLCertificateKeyFile "/Users/julienmiclo/.certificats/inscriptions.local/key.pem"

	SSLProxyEngine on
	SSLProxyVerify none
	SSLProxyCheckPeerCN off
	SSLProxyCheckPeerName off
	SSLProxyCheckPeerExpire off
	ProxyPreserveHost on
	ProxyPass / https://localhost:8000/
	ProxyPassReverse / https://localhost:8000/
</VirtualHost>

