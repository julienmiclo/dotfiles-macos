<VirtualHost *:80>
	ServerName gestion.gomed.local
RewriteEngine On
   RewriteCond %{HTTPS} off
   RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</VirtualHost>

<VirtualHost *:443>
	ServerName gestion.gomed.local

	    ErrorLog "/Users/julienmiclo/WebServer/logs/httpd/_.gomed.local/gestion.error.443.log"
        CustomLog "/Users/julienmiclo/WebServer/logs/httpd/_.gomed.local/gestion.access.443.log" common

	SSLEngine on
    	SSLProtocol All -SSLv2 -SSLv2 -TLSv1 -TLSv1.1
    	SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
    	SSLCompression off
    	SSLCertificateFile "/Users/julienmiclo/.certificats/_.gomed.local/cert.pem"
    	SSLCertificateKeyFile "/Users/julienmiclo/.certificats/_.gomed.local/key.pem"

	SSLProxyEngine on
	SSLProxyVerify none
	SSLProxyCheckPeerCN off
	SSLProxyCheckPeerName off
	SSLProxyCheckPeerExpire off
	ProxyPreserveHost on
	ProxyPass / https://localhost:8000/
	ProxyPassReverse / https://localhost:8000/
</VirtualHost>

<VirtualHost *:80>
	ServerName adherents.gomed.local
RewriteEngine On
   RewriteCond %{HTTPS} off
   RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</VirtualHost>

<VirtualHost *:443>
	ServerName adherents.gomed.local

	    ErrorLog "/Users/julienmiclo/WebServer/logs/httpd/_.gomed.local/adherents.error.443.log"
        CustomLog "/Users/julienmiclo/WebServer/logs/httpd/_.gomed.local/adherents.access.443.log" common

	SSLEngine on
    	SSLProtocol All -SSLv2 -SSLv2 -TLSv1 -TLSv1.1
    	SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
    	SSLCompression off
    	SSLCertificateFile "/Users/julienmiclo/.certificats/_.gomed.local/cert.pem"
    	SSLCertificateKeyFile "/Users/julienmiclo/.certificats/_.gomed.local/key.pem"

	SSLProxyEngine on
	SSLProxyVerify none
	SSLProxyCheckPeerCN off
	SSLProxyCheckPeerName off
	SSLProxyCheckPeerExpire off
	ProxyPreserveHost on
	ProxyPass / https://localhost:8000/
	ProxyPassReverse / https://localhost:8000/
</VirtualHost>

<VirtualHost *:80>
	ServerName api.gomed.local
RewriteEngine On
   RewriteCond %{HTTPS} off
   RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</VirtualHost>

<VirtualHost *:443>
	ServerName api.gomed.local

	    ErrorLog "/Users/julienmiclo/WebServer/logs/httpd/_.gomed.local/api.error.443.log"
        CustomLog "/Users/julienmiclo/WebServer/logs/httpd/_.gomed.local/api.access.443.log" common

	SSLEngine on
    	SSLProtocol All -SSLv2 -SSLv2 -TLSv1 -TLSv1.1
    	SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
    	SSLCompression off
    	SSLCertificateFile "/Users/julienmiclo/.certificats/_.gomed.local/cert.pem"
    	SSLCertificateKeyFile "/Users/julienmiclo/.certificats/_.gomed.local/key.pem"

	SSLProxyEngine on
	SSLProxyVerify none
	SSLProxyCheckPeerCN off
	SSLProxyCheckPeerName off
	SSLProxyCheckPeerExpire off
	ProxyPreserveHost on
	ProxyPass / https://localhost:8000/
	ProxyPassReverse / https://localhost:8000/
</VirtualHost>